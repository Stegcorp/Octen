<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<script>
    fetch("https://jsonplaceholder.typicode.com/users")
        .then(response => response.json())
        .then(usersData => {
            let idJs = JSON.parse(localStorage.getItem('user'))
            let users = usersData
            for (const user of users) {
                if (idJs[0].id === user.id) {
                    let main = document.createElement('div')
                    let inMain = document.createElement('div')
                    main.classList.add('userDef')
                    inMain.classList.add('inMain')
                    document.body.append(main)
                    let btn = document.createElement('button')
                    btn.classList.add('btn')
                    btn.innerText = 'post of current user'
                    btn.onclick = function (e) {
                        btn.disabled = true
                        fetch("https://jsonplaceholder.typicode.com/posts")
                            .then(response => response.json())
                            .then(responseData => {
                                let posts = responseData
                                let postDiv = document.createElement('div')
                                postDiv.classList.add('main')
                                postDiv.classList.add('postDiv')
                                for (const postElem of posts) {
                                    if (user.id === postElem.userId) {
                                        let title = document.createElement('div')
                                        title.classList.add('title')
                                        title.innerHTML = `<b>Title</b> - ${postElem.title}</br>`
                                        let botton = document.createElement('button')
                                        botton.classList.add('bottom')
                                        botton.innerText = 'post-details'
                                        botton.onclick = function (e) {
                                            postsJS = []
                                            postsJS.push({id: postElem.userId})
                                            localStorage.setItem('posts', JSON.stringify(postsJS))
                                            location.href = 'post-details.html'
                                        }
                                        title.appendChild(botton)
                                        postDiv.append(title)
                                    }
                                }
                                document.body.appendChild(postDiv)
                            })
                    }
                    for (const key in user) {
                        let divUser = document.createElement('div')
                        divUser.innerHTML = `<b>${key}</b> - ${user[key]}`
                        if (key === 'address') {
                            divUser.classList.add('geo')
                            divUser.innerHTML = `<b>${key}  - </b> `
                            let addrresDiv = document.createElement('div')
                            divUser.appendChild(addrresDiv)
                            addrresDiv.classList.add('column')
                            for (const divUserKey in user.address) {
                                let li = document.createElement('div')
                                li.innerHTML = `<b>${divUserKey}</b>  -  ${user.address[divUserKey]}`
                                if (divUserKey === 'geo') {
                                    li.classList.add('geo')
                                    li.innerHTML = `<b>${divUserKey} - </b>   `
                                    let geo = document.createElement('div')
                                    geo.classList.add('column')
                                    let lat = document.createElement('div')
                                    let lng = document.createElement('div')
                                    lat.innerHTML = `<b>lat    - </b>` + user.address[divUserKey].lat
                                    lng.innerHTML = `<b>lng    - </b>` + user.address[divUserKey].lng
                                    geo.append(lat, lng)
                                    li.append(geo)
                                }
                                addrresDiv.append(li)
                            }
                        }
                        if (key === 'company') {
                            divUser.classList.add('geo')
                            divUser.innerHTML = `<b>${key} - </b>  `
                            let divClass = document.createElement('div')
                            divClass.classList.add('column')
                            divUser.appendChild(divClass)
                            for (const divUserKey in user.company) {
                                let li = document.createElement('div')
                                li.innerHTML = `<b>${divUserKey}</b>  -  ${user.company[divUserKey]}`
                                divClass.append(li)
                            }
                        }
                        inMain.appendChild(divUser)
                        main.append(inMain, btn)
                    }
                }
            }
        })
</script>
</body>
</html>